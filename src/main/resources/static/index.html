<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shardis Project</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous"></script>
</head>
<body>
<h1>Shardis Project <span id="version"></span></h1>
<hr>
<h2 id="text"></h2>
<h2 id="date"></h2>
<ul id="fib"></ul>
<script>

    var fetchFibonacci = function (x) {
        $.get('/api/fib/' + x, function (data) {
            console.log('received data', data);
            $('#fib').append('<li>fib(' + x + ')=' + data + '</li>');
            if (x < 20) {
                fetchFibonacci(x + 1);
            }
        });
    };

    $(function () {
        console.log('Ready.');
        $.getJSON('/api/test', function (data) {
            console.log('received data', data);
            $('#text').html(data.text);
          $('#version').html(data.version);
            $('#date').html('Today is ' + data.date.substring(0, 10));
        });

        fetchFibonacci(0);

    });
</script>
</body>
</html>
